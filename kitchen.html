<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kitchen Tab</title>
    <link href="./resources/css/kitchen.css" type="text/css" rel="stylesheet">
    <link href="./resources/css/styles.css" type="text/css" rel="stylesheet">
    <link href="./resources/css/MultiSelect.css" type="text/css" rel="stylesheet">
</head>

<body>
    <div class="device">
        <!-- Kitchen Header -->
        <div id="header">Kitchen</div>
        
        <!-- Kitchen List Section -->
        <div id="item-background">
            <div id="item-list">
                <input type="text" id="input-item" placeholder="Add a new kitchen item...">
                <button id="add-button" onclick="addItemPopup()">Add Item</button>
            </div>
    
            <div id="list-container">
                <ul id="food-list"></ul>
            </div>
        </div>

        <div id="add-item-background" style="display: none">
            <p id="input-item-name"></p>
            <img class="upper-right-icon" onclick="closeNewItem()" height="60" src="resources/images/close_icon.png">
            <form>
                <div id = "form-sub">
                    <p id = secondary-text>Calories:</p>
                    <input type="number" class="input-numbers" id = "Calories" placeholder="number of calories" min="0">
                </div>

                <div id = "form-sub">
                    <p id = secondary-text>Food Type:</p>
                    <select class="input-select" id = "FoodType">
                        <option value="Dairy">Dairy</option>
                        <option value="Meats">Meats</option>
                        <option value="Seasoning">Seasoning</option>
                        <option value="Vegetables">Vegetables</option>
                        <option value="Fruits">Fruits</option>
                        <option value="Grains">Grains</option>
                        <option value="Snacks">Snacks</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div id = "form-sub">
                    <p id = secondary-text>Quantity:</p>
                    <input type="number" class="input-numbers" id = "Quantity" placeholder="number of items" min="1">
                </div>

                <div id = "form-sub">
                    <p id = secondary-text>Unit:</p>
                    <select class="input-select" id = "Unit">
                        <option value="Cans">Cans</option>
                        <option value="Bags">Bags</option>
                        <option value="Pounds">Pounds</option>
                        <option value="Boxes">Boxes</option>
                        <option value="Bottles">Bottles</option>
                        <option value="Packages">Packages</option>
                    </select>
                </div>

                <div id = "form-sub">
                    <p id = secondary-text>Expiration Date:</p>
                    <input type="date" class ="input-numbers" id = "date">
                </div>

                <button onclick="addKitchenItem()" id = "add-item-button">Add Item</button>

            </form>
        </div>

        <!-- Profile icon and page -->
        <img class='profile-icon' onclick="toggleSidePanel()" height="75" src="resources/images/profile_icon.png">
        <div class="profile-panel" id="profile-panel" style="display: none">
            <a class="profile-heading" href="profile.html" style="top: 10px">
                <img style="position:absolute; height:100px; left:20px" src="resources/images/profile_icon.png">
                <b class="user-name">User's Name</b>
                <small>View Profile</small>
            </a>

            <a href="settings.html" style="top: 150px">
                <img class="panel-images" src="resources/images/settings_icon.png">
                <b>Settings</b>
            </a>

            <a href="" style="top: 225px">
                <img class="panel-images" src="resources/images/plus_icon.png">
                <b>Add Users</b>
            </a>

            <a href="help.html" style="top: 300px">
                <img class="panel-images" src="resources/images/question_icon.png">
                <b>Help</b>
            </a>

            <a href="" style="top: 375px">
                <img class="panel-images" src="resources/images/logout_icon.png">
                <b>Log Out</b>
            </a>

            <img class="close-icon" onclick="toggleSidePanel()" height="50" src="resources/images/close_icon.png">
        </div>
        <!--- End Profile side panel -->
        
        <!-- Nav Bar html -->
        <div class="icon-bar">
            <a href="kitchen.html" class="active">
                <img src="resources/images/kitchen_icon.png" height="75">
            </a>
            <a href="lists_home.html">
                <img src="resources/images/lists_icon.png" height="75">
            </a>
            <a href="recipies.html">
                <img src="resources/images/recipies_icon.png" height="75">
            </a>
        </div>
        <!-- End Nav Bar html -->
    </div>

    <!-- <script src="MultiSelect.js"></script> -->

    <script>
        const input = "";

        function addItemPopup() {
            input = document.getElementById("input-item").value.trim();
            if(input == ""){
                alert("Please enter a food item.");
            }else{
                document.getElementById('add-item-background').style.display = 'block';
                document.getElementById('item-background').style.display = 'none';
                document.getElementById("input-item-name").innerHTML = input;
            }
        }

        function closeNewItem() {
            document.getElementById('add-item-background').style.display = 'none';
            document.getElementById('item-background').style.display = 'block';
        }

        function addKitchenItem() {

            const itemName = input;
            const calories = document.getElementById("Calories").value;
            const foodTypeSelect = document.getElementById("FoodType");
            const quantity = document.getElementById("Quantity").value;
            const unit = document.getElementById("Unit").value;
            const expirationDate = document.getElementById("Date").value;

            var itemInput = document.getElementById('input-item');
            var itemText = itemInput.value.trim();

            if (itemText === "") {
                alert("Please enter a kitchen item.");
                return;
            }

            var kitchenList = document.getElementById('food-list');

            var li = document.createElement('li');
            li.innerHTML = `
                ${itemText} 
                <button class="increase-btn" onclick="increaseQuantity(this)">+</button> 
                <span class="quantity">1</span>
                <button class="decrease-btn" onclick="decreaseQuantity(this)">-</button>
                <span class="close" onclick="removeKitchenItem(this)">x</span>
            `;
            kitchenList.appendChild(li);

            itemInput.value = "";

            document.getElementById('add-item-background').style.display = 'none';
            document.getElementById('item-background').style.display = 'block';
        }

        // Function to remove items from the kitchen list
        function removeKitchenItem(button) {
            var li = button.parentNode;
            li.parentNode.removeChild(li);
        }

        // Function to increase the quantity of an item
        function increaseQuantity(button) {
            var li = button.parentNode;
            var quantitySpan = li.querySelector(".quantity");
            var quantity = parseInt(quantitySpan.textContent);
            quantitySpan.textContent = quantity + 1;
        }

        // Function to decrease the quantity of an item
        function decreaseQuantity(button) {
            var li = button.parentNode;
            var quantitySpan = li.querySelector(".quantity");
            var quantity = parseInt(quantitySpan.textContent);

            if (quantity > 1) {
                quantitySpan.textContent = quantity - 1;
            } else {
                li.parentNode.removeChild(li); // Remove the item if quantity is 0
            }
        }

        function toggleSidePanel() {
            var x = document.getElementById('profile-panel');
            if (x.style.display === "none") {
                x.style.display = 'block';
            } else {
                x.style.display = 'none';
            }
        }

    </script>
</body>
</html>
